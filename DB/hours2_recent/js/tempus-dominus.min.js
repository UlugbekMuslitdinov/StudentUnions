var tempusDominus=function(e,t,s){"use strict";function i(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(s){if("default"!==s){var i=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:function(){return e[s]}})}})),t.default=e,t}var n,o=i(e),c=a(t);!function(e){e.seconds="seconds",e.minutes="minutes",e.hours="hours",e.date="date",e.month="month",e.year="year"}(n||(n={}));class DateTime extends Date{constructor(){super(...arguments),this.locale="default"}setLocale(e){return this.locale=e,this}static convert(e){if(!e)throw"A date is required";return new DateTime(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}get clone(){return new DateTime(this.year,this.month,this.date,this.hours,this.minutes,this.seconds,this.getMilliseconds()).setLocale(this.locale)}startOf(e){if(void 0===this[e])throw`Unit '${e}' is not valid`;switch(e){case"seconds":this.setMilliseconds(0);break;case"minutes":this.setSeconds(0,0);break;case"hours":this.setMinutes(0,0,0);break;case"date":this.setHours(0,0,0,0);break;case"weekDay":this.startOf(n.date),this.manipulate(0-this.weekDay,n.date);break;case"month":this.startOf(n.date),this.setDate(1);break;case"year":this.startOf(n.date),this.setMonth(0,1)}return this}endOf(e){if(void 0===this[e])throw`Unit '${e}' is not valid`;switch(e){case"seconds":this.setMilliseconds(999);break;case"minutes":this.setSeconds(59,999);break;case"hours":this.setMinutes(59,59,999);break;case"date":this.setHours(23,59,59,999);break;case"weekDay":this.startOf(n.date),this.manipulate(6-this.weekDay,n.date);break;case"month":this.endOf(n.date),this.manipulate(1,n.month),this.setDate(0);break;case"year":this.endOf(n.date),this.manipulate(1,n.year),this.setDate(0)}return this}manipulate(e,t){if(void 0===this[t])throw`Unit '${t}' is not valid`;return this[t]+=e,this}format(e,t=this.locale){return"string"==typeof e?c.DateTime.fromJSDate(this).setLocale(t).toFormat(e):new Intl.DateTimeFormat(t,e).format(this)}get isValid(){return this.getTime()==this.getTime()}isBefore(e,t){if(!t)return this.valueOf()<e.valueOf();if(void 0===this[t])throw`Unit '${t}' is not valid`;return this.clone.startOf(t).valueOf()<e.clone.startOf(t).valueOf()}isAfter(e,t){if(!t)return this.valueOf()>e.valueOf();if(void 0===this[t])throw`Unit '${t}' is not valid`;return this.clone.startOf(t).valueOf()>e.clone.startOf(t).valueOf()}isSame(e,t){if(!t)return this.valueOf()===e.valueOf();if(void 0===this[t])throw`Unit '${t}' is not valid`;return e=DateTime.convert(e),this.clone.startOf(t).valueOf()===e.startOf(t).valueOf()}isBetween(e,t,s,i="()"){if(s&&void 0===this[s])throw`Unit '${s}' is not valid`;const a="("===i[0],n=")"===i[1];return(a?this.isAfter(e,s):!this.isBefore(e,s))&&(n?this.isBefore(t,s):!this.isAfter(t,s))||(a?this.isBefore(e,s):!this.isAfter(e,s))&&(n?this.isAfter(t,s):!this.isBefore(t,s))}parts(e=this.locale,t={dateStyle:"full",timeStyle:"long"}){const s={};return new Intl.DateTimeFormat(e,t).formatToParts(this).filter((e=>"literal"!==e.type)).forEach((e=>s[e.type]=e.value)),s}get seconds(){return this.getSeconds()}set seconds(e){this.setSeconds(e)}get secondsFormatted(){return this.format({second:"2-digit"})}get minutes(){return this.getMinutes()}set minutes(e){this.setMinutes(e)}get minutesFormatted(){return this.format({minute:"2-digit"})}get hours(){return this.getHours()}set hours(e){this.setHours(e)}get hoursFormatted(){return this.format({hour:"2-digit"})}get twelveHoursFormatted(){return this.format({hour12:!0,hour:"2-digit"})}meridiem(e=this.locale){return this.hours<=12?"AM":"PM"}get date(){return this.getDate()}set date(e){this.setDate(e)}get dateFormatted(){return this.date<10?`0${this.date}`:`${this.date}`}get week(){const e=new Date(this.year,0,1);return e.setDate(e.getDate()+(1-e.getDay()%7)),Math.round((this.valueOf()-e.valueOf())/6048e5)+1}get weekDay(){return this.getDay()}get month(){return this.getMonth()}set month(e){this.setMonth(e)}get monthFormatted(){return this.month+1<10?`0${this.month}`:`${this.month}`}get year(){return this.getFullYear()}set year(e){this.setFullYear(e)}}class TdError extends Error{}const r="tempus-dominus";class Namespace{}Namespace.NAME=r,Namespace.version="6.0.0-alpha1",Namespace.dataKey="td",Namespace.Events=new class Events{constructor(){this.key=".td",this.change=`change${this.key}`,this.update=`update${this.key}`,this.error=`error${this.key}`,this.show=`show${this.key}`,this.hide=`hide${this.key}`,this.blur=`blur${this.key}`,this.focus=`focus${this.key}`,this.keyup=`keyup${this.key}`,this.keydown=`keydown${this.key}`}},Namespace.Css=new class Css{constructor(){this.widget=`${r}-widget`,this.switch="picker-switch",this.sideBySide="timepicker-sbs",this.previous="previous",this.next="next",this.disabled="disabled",this.old="old",this.new="new",this.active="active",this.dateContainer="date-container",this.decadesContainer=`${this.dateContainer}-decades`,this.decade="decade",this.yearsContainer=`${this.dateContainer}-years`,this.year="year",this.monthsContainer=`${this.dateContainer}-months`,this.month="month",this.daysContainer=`${this.dateContainer}-days`,this.day="day",this.calendarWeeks="cw",this.dayOfTheWeek="dow",this.today="today",this.weekend="weekend",this.timeContainer="time-container",this.separator="separator",this.clockContainer=`${this.timeContainer}-clock`,this.hourContainer=`${this.timeContainer}-hour`,this.minuteContainer=`${this.timeContainer}-minute`,this.secondContainer=`${this.timeContainer}-second`,this.hour="hour",this.minute="minute",this.second="second",this.show="show",this.collapsing="td-collapsing",this.collapse="td-collapse",this.inline="inline"}},Namespace.ErrorMessages=new class ErrorMessages{constructor(){this.base="TD:",this.failedToSetInvalidDate="Failed to set invalid date",this.failedToParseInput="Failed parse input field"}unexpectedOption(e){const t=new TdError(`${this.base} Unexpected option: ${e} does not match a known option.`);throw t.code=1,t}unexpectedOptions(e){const t=new TdError(`${this.base}: ${e.join(", ")}`);throw t.code=1,t}unexpectedOptionValue(e,t,s){const i=new TdError(`${this.base} Unexpected option value: ${e} does not accept a value of "${t}". Valid values are: ${s.join(", ")}`);throw i.code=2,i}typeMismatch(e,t,s){const i=new TdError(`${this.base} Mismatch types: ${e} has a type of ${t} instead of the required ${s}`);throw i.code=3,i}numbersOutOfRage(e,t,s){const i=new TdError(`${this.base} ${e} expected an array of number between ${t} and ${s}.`);throw i.code=4,i}failedToParseDate(e,t){const s=new TdError(`${this.base} Could not correctly parse "${t}" to a date for option ${e}.`);throw s.code=5,s}mustProvideElement(){const e=new TdError(`${this.base} No element was provided.`);throw e.code=6,e}subscribeMismatch(){const e=new TdError(`${this.base} The subscribed events does not match the number of callbacks`);throw e.code=7,e}conflictingConfiguration(e){const t=new TdError(`${this.base} A configuration value conflicts with another rule. ${e}`);throw t.code=8,t}dateString(){console.warn(`${this.base} Using a string for date options is not recommended unless you specify an ISO string.`)}};const d={restrictions:{minDate:void 0,maxDate:void 0,disabledDates:[],enabledDates:[],daysOfWeekDisabled:[],disabledTimeIntervals:[],disabledHours:[],enabledHours:[]},display:{icons:{type:"icons",time:"fas fa-clock",date:"fas fa-calendar",up:"fas fa-arrow-up",down:"fas fa-arrow-down",previous:"fas fa-chevron-left",next:"fas fa-chevron-right",today:"fas fa-calendar-check",clear:"fas fa-trash",close:"fas fa-times"},sideBySide:!1,calendarWeeks:!1,viewMode:"calendar",toolbarPlacement:"default",buttons:{today:!1,clear:!1,close:!1},components:{calendar:!0,date:!0,month:!0,year:!0,decades:!0,century:!0,clock:!0,hours:!0,minutes:!0,seconds:!1,useTwentyfourHour:!1},inputFormat:"",inline:!1},stepping:1,useCurrent:!0,defaultDate:!1,localization:{today:"Go to today",clear:"Clear selection",close:"Close the picker",selectMonth:"Select Month",previousMonth:"Previous Month",nextMonth:"Next Month",selectYear:"Select Year",previousYear:"Previous Year",nextYear:"Next Year",selectDecade:"Select Decade",previousDecade:"Previous Decade",nextDecade:"Next Decade",previousCentury:"Previous Century",nextCentury:"Next Century",pickHour:"Pick Hour",incrementHour:"Increment Hour",decrementHour:"Decrement Hour",pickMinute:"Pick Minute",incrementMinute:"Increment Minute",decrementMinute:"Decrement Minute",pickSecond:"Pick Second",incrementSecond:"Increment Second",decrementSecond:"Decrement Second",togglePeriod:"Toggle Period",selectTime:"Select Time",selectDate:"Select Date",dayViewHeaderFormat:"long",locale:"default"},readonly:!1,ignoreReadonly:!1,keepOpen:!1,focusOnShow:!0,keepInvalid:!1,keyBinds:{"control down":()=>!1,pageDown:()=>!1,"control up":()=>!1,right:()=>!1,pageUp:()=>!1,down:()=>!1,delete:()=>!1,t:()=>!1,left:()=>!1,up:()=>!1,enter:()=>!1,"control space":()=>!1,escape:()=>!1},debug:!1,allowInputToggle:!1,viewDate:new DateTime,multipleDates:!1,multipleDatesSeparator:"; ",promptTimeOnDateChange:!1,promptTimeOnDateChangeTransitionDelay:200},l=[{name:"calendar",className:Namespace.Css.daysContainer,unit:n.month,step:1},{name:"months",className:Namespace.Css.monthsContainer,unit:n.year,step:1},{name:"years",className:Namespace.Css.yearsContainer,unit:n.year,step:10},{name:"decades",className:Namespace.Css.decadesContainer,unit:n.year,step:100}];class Collapse{constructor(){this.getTransitionDurationFromElement=e=>{if(!e)return 0;let{transitionDuration:t,transitionDelay:s}=window.getComputedStyle(e);const i=Number.parseFloat(t),a=Number.parseFloat(s);return i||a?(t=t.split(",")[0],s=s.split(",")[0],1e3*(Number.parseFloat(t)+Number.parseFloat(s))):0}}toggle(e){e.classList.contains(Namespace.Css.show)?this.hide(e):this.show(e)}show(e){if(e.classList.contains(Namespace.Css.collapsing)||e.classList.contains(Namespace.Css.show))return;e.style.height="0",e.classList.remove(Namespace.Css.collapse),e.classList.add(Namespace.Css.collapsing),this.timeOut=setTimeout((()=>{e.classList.remove(Namespace.Css.collapsing),e.classList.add(Namespace.Css.collapse,Namespace.Css.show),e.style.height="",this.timeOut=null}),this.getTransitionDurationFromElement(e)),e.style.height=`${e.scrollHeight}px`}hide(e){if(e.classList.contains(Namespace.Css.collapsing)||!e.classList.contains(Namespace.Css.show))return;e.style.height=`${e.getBoundingClientRect().height}px`;e.offsetHeight,e.classList.remove(Namespace.Css.collapse,Namespace.Css.show),e.classList.add(Namespace.Css.collapsing),e.style.height="",this.timeOut=setTimeout((()=>{e.classList.remove(Namespace.Css.collapsing),e.classList.add(Namespace.Css.collapse),this.timeOut=null}),this.getTransitionDurationFromElement(e))}}class Actions{constructor(e){this._context=e,this.collapse=new Collapse}do(e,t){const s=e.currentTarget;if(s.classList.contains(Namespace.Css.disabled))return!1;t=t||s.dataset.action;const i=(this._context.dates.lastPicked||this._context._viewDate).clone,a=(e,t=1)=>{const s=i.manipulate(t,e);this._context._validation.isValid(s,e)&&this._context.dates._setValue(s,this._context.dates.lastPickedIndex)};switch(t){case h.next:case h.previous:const{unit:o,step:c}=l[this._context._currentViewMode];t===h.next?this._context._viewDate.manipulate(c,o):this._context._viewDate.manipulate(-1*c,o),this._context._display._update("calendar"),this._context._viewUpdate(o);break;case h.pickerSwitch:this._context._display._showMode(1),this._context._viewUpdate(l[this._context._currentViewMode].unit);break;case h.selectMonth:case h.selectYear:case h.selectDecade:const r=+s.getAttribute("data-value");switch(t){case h.selectMonth:this._context._viewDate.month=r,this._context._viewUpdate(n.month);break;case h.selectYear:case h.selectDecade:this._context._viewDate.year=r,this._context._viewUpdate(n.year)}this._context._currentViewMode===this._context._minViewModeNumber?(this._context.dates._setValue(this._context._viewDate,this._context.dates.lastPickedIndex),this._context._options.display.inline||this._context._display.hide()):this._context._display._showMode(-1);break;case h.selectDay:const d=this._context._viewDate.clone;s.classList.contains(Namespace.Css.old)&&d.manipulate(-1,n.month),s.classList.contains(Namespace.Css.new)&&d.manipulate(1,n.month),d.date=+s.getAttribute("data-day");let p=0;this._context._options.multipleDates?(p=this._context.dates.pickedIndex(d,n.date),-1!==p?this._context.dates._setValue(null,p):this._context.dates._setValue(d,this._context.dates.lastPickedIndex+1)):this._context.dates._setValue(d,this._context.dates.lastPickedIndex),this._context._display._hasTime||this._context._options.keepOpen||this._context._options.display.inline||this._context._options.multipleDates||this._context._display.hide();break;case h.selectHour:let u=+s.getAttribute("data-value");i.hours=u,this._context.dates._setValue(i,this._context.dates.lastPickedIndex),!this._context._options.display.components.useTwentyfourHour||this._context._options.display.components.minutes||this._context._options.keepOpen||this._context._options.display.inline?this.do(e,h.showClock):this._context._display.hide();break;case h.selectMinute:i.minutes=+s.getAttribute("data-value"),this._context.dates._setValue(i,this._context.dates.lastPickedIndex),!this._context._options.display.components.useTwentyfourHour||this._context._options.display.components.seconds||this._context._options.keepOpen||this._context._options.display.inline?this.do(e,h.showClock):this._context._display.hide();break;case h.selectSecond:i.seconds=+s.getAttribute("data-value"),this._context.dates._setValue(i,this._context.dates.lastPickedIndex),!this._context._options.display.components.useTwentyfourHour||this._context._options.keepOpen||this._context._options.display.inline?this.do(e,h.showClock):this._context._display.hide();break;case h.incrementHours:a(n.hours);break;case h.incrementMinutes:a(n.minutes,this._context._options.stepping);break;case h.incrementSeconds:a(n.seconds);break;case h.decrementHours:a(n.hours,-1);break;case h.decrementMinutes:a(n.minutes,-1*this._context._options.stepping);break;case h.decrementSeconds:a(n.seconds,-1);break;case h.togglePeriod:a(n.hours,this._context.dates.lastPicked.hours>=12?-12:12);break;case h.togglePicker:this._context._display.widget.querySelectorAll(`.${Namespace.Css.dateContainer}, .${Namespace.Css.timeContainer}`).forEach((e=>this.collapse.toggle(e))),s.getAttribute("title")===this._context._options.localization.selectDate?(s.setAttribute("title",this._context._options.localization.selectTime),s.innerHTML=this._context._display._iconTag(this._context._options.display.icons.time).outerHTML,this._context._display._update("calendar")):(s.setAttribute("title",this._context._options.localization.selectDate),s.innerHTML=this._context._display._iconTag(this._context._options.display.icons.date).outerHTML,this.do(e,h.showClock),this._context._display._update("clock")),setTimeout((()=>this._context._display.popper.forceUpdate()),this.collapse.getTransitionDurationFromElement(this._context._display.widget.querySelector(".td-collapsing")));break;case h.showClock:case h.showHours:case h.showMinutes:case h.showSeconds:this._context._display.widget.querySelectorAll(`.${Namespace.Css.timeContainer} > div`).forEach((e=>e.style.display="none"));let m="";switch(t){case h.showClock:m=Namespace.Css.clockContainer,this._context._display._update("clock");break;case h.showHours:m=Namespace.Css.hourContainer,this._context._display._update(n.hours);break;case h.showMinutes:m=Namespace.Css.minuteContainer,this._context._display._update(n.minutes);break;case h.showSeconds:m=Namespace.Css.secondContainer,this._context._display._update(n.seconds)}this._context._display.widget.getElementsByClassName(m)[0].style.display="block";break;case h.clear:this._context.dates._setValue(null);break;case h.close:this._context._display.hide();break;case h.today:const _=(new DateTime).setLocale(this._context._options.localization.locale);this._context._viewDate=_,this._context._validation.isValid(_,n.date)&&this._context.dates._setValue(_,this._context.dates.lastPickedIndex)}}}var h;!function(e){e.next="next",e.previous="previous",e.pickerSwitch="pickerSwitch",e.selectMonth="selectMonth",e.selectYear="selectYear",e.selectDecade="selectDecade",e.selectDay="selectDay",e.selectHour="selectHour",e.selectMinute="selectMinute",e.selectSecond="selectSecond",e.incrementHours="incrementHours",e.incrementMinutes="incrementMinutes",e.incrementSeconds="incrementSeconds",e.decrementHours="decrementHours",e.decrementMinutes="decrementMinutes",e.decrementSeconds="decrementSeconds",e.togglePeriod="togglePeriod",e.togglePicker="togglePicker",e.showClock="showClock",e.showHours="showHours",e.showMinutes="showMinutes",e.showSeconds="showSeconds",e.clear="clear",e.close="close",e.today="today"}(h||(h={}));class DateDisplay{constructor(e){this._context=e}get _picker(){const e=document.createElement("div");e.classList.add(Namespace.Css.daysContainer);const t=document.createElement("table"),s=this._context._display._headTemplate,[i,a,n]=s.getElementsByTagName("th");i.getElementsByTagName("div")[0].setAttribute("title",this._context._options.localization.previousMonth),a.setAttribute("title",this._context._options.localization.selectMonth),n.getElementsByTagName("div")[0].setAttribute("title",this._context._options.localization.nextMonth),t.appendChild(s);const o=document.createElement("tbody");o.appendChild(this._daysOfTheWeek());let c=document.createElement("tr");if(this._context._options.display.calendarWeeks){const e=document.createElement("td"),t=document.createElement("div");t.classList.add(Namespace.Css.calendarWeeks),e.appendChild(t),c.appendChild(e)}for(let e=0;e<=42;e++){if(0!==e&&e%7==0&&(o.appendChild(c),c=document.createElement("tr"),this._context._options.display.calendarWeeks)){const e=document.createElement("td"),t=document.createElement("div");t.classList.add(Namespace.Css.calendarWeeks),e.appendChild(t),c.appendChild(e)}const t=document.createElement("td"),s=document.createElement("div");s.setAttribute("data-action",h.selectDay),t.appendChild(s),c.appendChild(t)}return t.appendChild(o),e.appendChild(t),e}_update(){const e=this._context._display.widget.getElementsByClassName(Namespace.Css.daysContainer)[0],[t,s,i]=e.getElementsByTagName("thead")[0].getElementsByTagName("th");s.innerText=this._context._viewDate.format({month:this._context._options.localization.dayViewHeaderFormat}),this._context._validation.isValid(this._context._viewDate.clone.manipulate(-1,n.month),n.month)?t.classList.remove(Namespace.Css.disabled):t.classList.add(Namespace.Css.disabled),this._context._validation.isValid(this._context._viewDate.clone.manipulate(1,n.month),n.month)?i.classList.remove(Namespace.Css.disabled):i.classList.add(Namespace.Css.disabled);let a=this._context._viewDate.clone.startOf(n.month).startOf("weekDay").manipulate(12,n.hours);e.querySelectorAll("tbody td div").forEach(((e,t)=>{if(this._context._options.display.calendarWeeks&&e.classList.contains(Namespace.Css.calendarWeeks))return void(e.innerText=`${a.week}`);let s=[];s.push(Namespace.Css.day),a.isBefore(this._context._viewDate,n.month)&&s.push(Namespace.Css.old),a.isAfter(this._context._viewDate,n.month)&&s.push(Namespace.Css.new),!this._context._unset&&this._context.dates.isPicked(a,n.date)&&s.push(Namespace.Css.active),this._context._validation.isValid(a,n.date)||s.push(Namespace.Css.disabled),a.isSame(new DateTime,n.date)&&s.push(Namespace.Css.today),0!==a.weekDay&&6!==a.weekDay||s.push(Namespace.Css.weekend),e.classList.remove(...e.classList),e.classList.add(...s),e.setAttribute("data-value",`${a.year}-${a.monthFormatted}-${a.dateFormatted}`),e.setAttribute("data-day",`${a.date}`),e.innerText=a.format({day:"numeric"}),a.manipulate(1,n.date)}))}_daysOfTheWeek(){let e=this._context._viewDate.clone.startOf("weekDay").startOf(n.date);const t=document.createElement("tr");if(this._context._options.display.calendarWeeks){const e=document.createElement("th");e.classList.add(Namespace.Css.calendarWeeks),e.innerText="#",t.appendChild(e)}let s=0;for(;s<7;){const i=document.createElement("th");i.classList.add(Namespace.Css.dayOfTheWeek),i.innerText=e.format({weekday:"short"}),e.manipulate(1,n.date),t.appendChild(i),s++}return t}}class MonthDisplay{constructor(e){this._context=e}get _picker(){const e=document.createElement("div");e.classList.add(Namespace.Css.monthsContainer);const t=document.createElement("table"),s=this._context._display._headTemplate,[i,a,n]=s.getElementsByTagName("th");i.getElementsByTagName("div")[0].setAttribute("title",this._context._options.localization.previousYear),a.setAttribute("title",this._context._options.localization.selectYear),a.setAttribute("colspan","2"),n.getElementsByTagName("div")[0].setAttribute("title",this._context._options.localization.nextYear),t.appendChild(s);const o=document.createElement("tbody");let c=document.createElement("tr");for(let e=0;e<=12;e++){0!==e&&e%4==0&&(o.appendChild(c),c=document.createElement("tr"));const t=document.createElement("td"),s=document.createElement("div");s.setAttribute("data-action",h.selectMonth),t.appendChild(s),c.appendChild(t)}return t.appendChild(o),e.appendChild(t),e}_update(){const e=this._context._display.widget.getElementsByClassName(Namespace.Css.monthsContainer)[0],[t,s,i]=e.getElementsByTagName("thead")[0].getElementsByTagName("th");s.innerText=this._context._viewDate.format({year:"numeric"}),this._context._validation.isValid(this._context._viewDate.clone.manipulate(-1,n.year),n.year)?t.classList.remove(Namespace.Css.disabled):t.classList.add(Namespace.Css.disabled),this._context._validation.isValid(this._context._viewDate.clone.manipulate(1,n.year),n.year)?i.classList.remove(Namespace.Css.disabled):i.classList.add(Namespace.Css.disabled);let a=this._context._viewDate.clone.startOf(n.year);e.querySelectorAll("tbody td div").forEach(((e,t)=>{let s=[];s.push(Namespace.Css.month),!this._context._unset&&this._context.dates.isPicked(a,n.month)&&s.push(Namespace.Css.active),this._context._validation.isValid(a,n.month)||s.push(Namespace.Css.disabled),e.classList.remove(...e.classList),e.classList.add(...s),e.setAttribute("data-value",`${t}`),e.innerText=`${a.format({month:"short"})}`,a.manipulate(1,n.month)}))}}class YearDisplay{constructor(e){this._context=e,this._startYear=this._context._viewDate.clone.manipulate(-1,n.year),this._endYear=this._context._viewDate.clone.manipulate(10,n.year)}get _picker(){const e=document.createElement("div");e.classList.add(Namespace.Css.yearsContainer);const t=document.createElement("table"),s=this._context._display._headTemplate,[i,a,n]=s.getElementsByTagName("th");i.getElementsByTagName("div")[0].setAttribute("title",this._context._options.localization.previousDecade),a.setAttribute("title",this._context._options.localization.selectDecade),a.setAttribute("colspan","1"),n.getElementsByTagName("div")[0].setAttribute("title",this._context._options.localization.nextDecade),t.appendChild(s);const o=document.createElement("tbody");let c=document.createElement("tr");for(let e=0;e<=12;e++){0!==e&&e%3==0&&(o.appendChild(c),c=document.createElement("tr"));const t=document.createElement("td"),s=document.createElement("div");s.setAttribute("data-action",h.selectYear),t.appendChild(s),c.appendChild(t)}return t.appendChild(o),e.appendChild(t),e}_update(){const e=this._context._display.widget.getElementsByClassName(Namespace.Css.yearsContainer)[0],[t,s,i]=e.getElementsByTagName("thead")[0].getElementsByTagName("th");this._startYear=this._context.viewDate.clone.manipulate(-1,n.year),this._endYear=this._context.viewDate.clone.manipulate(10,n.year),s.innerText=`${this._startYear.format({year:"numeric"})}-${this._endYear.format({year:"numeric"})}`,this._context._validation.isValid(this._startYear,n.year)?t.classList.remove(Namespace.Css.disabled):t.classList.add(Namespace.Css.disabled),this._context._validation.isValid(this._endYear,n.year)?i.classList.remove(Namespace.Css.disabled):i.classList.add(Namespace.Css.disabled);let a=this._startYear;e.querySelectorAll("tbody td div").forEach(((e,t)=>{let s=[];s.push(Namespace.Css.year),!this._context._unset&&this._context.dates.isPicked(a,n.year)&&s.push(Namespace.Css.active),this._context._validation.isValid(a,n.year)||s.push(Namespace.Css.disabled),e.classList.remove(...e.classList),e.classList.add(...s),e.setAttribute("data-value",`${a.year}`),e.innerText=a.format({year:"numeric"}),a.manipulate(1,n.year)}))}}class Dates{constructor(e){this._dates=[],this._context=e}get picked(){return this._dates}get lastPicked(){return this._dates[this.lastPickedIndex]}get lastPickedIndex(){return 0===this._dates.length?0:this._dates.length-1}add(e){this._dates.push(e)}isPicked(e,t){if(!t)return void 0!==this._dates.find((t=>t===e));const s=Dates.getFormatByUnit(t);let i=e.format(s);return void 0!==this._dates.map((e=>e.format(s))).find((e=>e===i))}pickedIndex(e,t){if(!t)return this._dates.indexOf(e);const s=Dates.getFormatByUnit(t);let i=e.format(s);return this._dates.map((e=>e.format(s))).indexOf(i)}clear(){this._context._unset=!0,this._context._triggerEvent({type:Namespace.Events.change,date:void 0,oldDate:this.lastPicked,isClear:!0,isValid:!0}),this._dates=[]}static getStartEndYear(e,t){const s=e/10,i=Math.floor(t/e)*e;return[i,i+9*s,Math.floor(t/s)*s]}_setValue(e,t){const s=void 0===t,i=!e&&s;let a=this._context._unset?null:this._dates[t];!a&&!this._context._unset&&s&&i&&(a=this.lastPicked);const n=()=>{if(!this._context._input)return;let t=null==e?void 0:e.format(this._context._options.display.inputFormat);this._context._options.multipleDates&&(t=this._dates.map((e=>e.format(this._context._options.display.inputFormat))).join(this._context._options.multipleDatesSeparator)),this._context._input.value!=t&&(this._context._input.value=t)};return e?(t=t||0,e=e.clone,1!==this._context._options.stepping&&(e.minutes=Math.round(e.minutes/this._context._options.stepping)*this._context._options.stepping,e.seconds=0),this._context._validation.isValid(e)?(this._dates[t]=e,this._context._viewDate=e.clone,n(),this._context._unset=!1,this._context._display._update("all"),void this._context._triggerEvent({type:Namespace.Events.change,date:e,oldDate:a,isClear:i,isValid:!0})):(this._context._options.keepInvalid&&(this._dates[t]=e,this._context._viewDate=e.clone,this._context._triggerEvent({type:Namespace.Events.change,date:e,oldDate:a,isClear:i,isValid:!1})),void this._context._triggerEvent({type:Namespace.Events.error,reason:Namespace.ErrorMessages.failedToSetInvalidDate,date:e,oldDate:a}))):(!this._context._options.multipleDates||1===this._dates.length||i?(this._context._unset=!0,this._dates=[]):this._dates.splice(t,1),this._context._triggerEvent({type:Namespace.Events.change,date:void 0,oldDate:a,isClear:i,isValid:!0}),n(),void this._context._display._update("all"))}static getFormatByUnit(e){switch(e){case"date":return{dateStyle:"short"};case"month":return{month:"numeric",year:"numeric"};case"year":return{year:"numeric"}}}}class DecadeDisplay{constructor(e){this._context=e}get _picker(){const e=document.createElement("div");e.classList.add(Namespace.Css.decadesContainer);const t=document.createElement("table"),s=this._context._display._headTemplate,[i,a,n]=s.getElementsByTagName("th");i.getElementsByTagName("div")[0].setAttribute("title",this._context._options.localization.previousCentury),a.setAttribute("title",""),a.removeAttribute("data-action"),a.setAttribute("colspan","1"),n.getElementsByTagName("div")[0].setAttribute("title",this._context._options.localization.nextCentury),t.appendChild(s);const o=document.createElement("tbody");let c=document.createElement("tr");for(let e=0;e<=12;e++){0!==e&&e%3==0&&(o.appendChild(c),c=document.createElement("tr"));const t=document.createElement("td"),s=document.createElement("div");s.setAttribute("data-action",h.selectDecade),t.appendChild(s),c.appendChild(t)}return t.appendChild(o),e.appendChild(t),e}_update(){const[e,t]=Dates.getStartEndYear(100,this._context._viewDate.year);this._startDecade=this._context._viewDate.clone.startOf(n.year),this._startDecade.year=e,this._endDecade=this._context._viewDate.clone.startOf(n.year),this._endDecade.year=t;const s=this._context._display.widget.getElementsByClassName(Namespace.Css.decadesContainer)[0],[i,a,o]=s.getElementsByTagName("thead")[0].getElementsByTagName("th");a.innerText=`${this._startDecade.format({year:"numeric"})}-${this._endDecade.format({year:"numeric"})}`,this._context._validation.isValid(this._startDecade,n.year)?i.classList.remove(Namespace.Css.disabled):i.classList.add(Namespace.Css.disabled),this._context._validation.isValid(this._endDecade,n.year)?o.classList.remove(Namespace.Css.disabled):o.classList.add(Namespace.Css.disabled);const c=this._context.dates.picked.map((e=>e.year)),r=s.querySelectorAll("tbody td div");r.forEach(((e,t)=>{if(0===t)return e.classList.add(Namespace.Css.old),this._startDecade.year-10<0?(e.textContent=" ",i.classList.add(Namespace.Css.disabled),e.classList.add(Namespace.Css.disabled),void e.setAttribute("data-value","")):(e.innerText=this._startDecade.clone.manipulate(-10,n.year).format({year:"numeric"}),void e.setAttribute("data-value",`${this._startDecade.clone.manipulate(-10,n.year).year+6}`));let s=[];s.push(Namespace.Css.decade);const a=this._startDecade.year,o=this._startDecade.year+9;!this._context._unset&&c.filter((e=>e>=a&&e<=o)).length>0&&s.push(Namespace.Css.active),e.classList.remove(...e.classList),e.classList.add(...s),e.setAttribute("data-value",`${this._startDecade.year+6}`),e.innerText=`${this._startDecade.format({year:"numeric"})}`,r.length===t+1&&e.classList.add(Namespace.Css.old),this._startDecade.manipulate(10,n.year)}))}}class TimeDisplay{constructor(e){this._context=e}get _picker(){const e=document.createElement("div");e.classList.add(Namespace.Css.clockContainer);const t=document.createElement("table"),s=document.createElement("tbody");return this._grid().forEach((e=>s.appendChild(e))),t.appendChild(s),e.appendChild(t),e}_update(){const e=this._context._display.widget.getElementsByClassName(Namespace.Css.clockContainer)[0],t=(this._context.dates.lastPicked||this._context._viewDate).clone;if(!this._context._options.display.components.useTwentyfourHour){const s=e.querySelector(`[data-action=${h.togglePeriod}]`);s.innerText=t.meridiem(),this._context._validation.isValid(t.clone.manipulate(t.hours>=12?-12:12,n.hours))?s.classList.remove(Namespace.Css.disabled):s.classList.add(Namespace.Css.disabled)}e.querySelectorAll(".disabled").forEach((e=>e.classList.remove(Namespace.Css.disabled))),this._context._options.display.components.hours&&(this._context._validation.isValid(this._context._viewDate.clone.manipulate(1,n.hours),n.hours)||e.querySelector(`[data-action=${h.incrementHours}]`).classList.add(Namespace.Css.disabled),this._context._validation.isValid(this._context._viewDate.clone.manipulate(-1,n.hours),n.hours)||e.querySelector(`[data-action=${h.decrementHours}]`).classList.add(Namespace.Css.disabled),e.querySelector(`[data-time-component=${n.hours}]`).innerText=this._context._options.display.components.useTwentyfourHour?t.hoursFormatted:t.twelveHoursFormatted),this._context._options.display.components.minutes&&(this._context._validation.isValid(this._context._viewDate.clone.manipulate(1,n.minutes),n.minutes)||e.querySelector(`[data-action=${h.incrementMinutes}]`).classList.add(Namespace.Css.disabled),this._context._validation.isValid(this._context._viewDate.clone.manipulate(-1,n.minutes),n.minutes)||e.querySelector(`[data-action=${h.decrementMinutes}]`).classList.add(Namespace.Css.disabled),e.querySelector(`[data-time-component=${n.minutes}]`).innerText=t.minutesFormatted),this._context._options.display.components.seconds&&(this._context._validation.isValid(this._context._viewDate.clone.manipulate(1,n.seconds),n.seconds)||e.querySelector(`[data-action=${h.incrementSeconds}]`).classList.add(Namespace.Css.disabled),this._context._validation.isValid(this._context._viewDate.clone.manipulate(-1,n.seconds),n.seconds)||e.querySelector(`[data-action=${h.decrementSeconds}]`).classList.add(Namespace.Css.disabled),e.querySelector(`[data-time-component=${n.seconds}]`).innerText=t.secondsFormatted)}_grid(){const e=[],t=document.createElement("td"),s=t.cloneNode(!0),i=document.createElement("tr"),a=document.createElement("tr"),o=document.createElement("tr"),c=this._context._display._iconTag(this._context._options.display.icons.up),r=this._context._display._iconTag(this._context._options.display.icons.down),d=document.createElement("div");if(t.classList.add(Namespace.Css.separator),s.innerHTML=":",this._context._options.display.components.hours){let e=document.createElement("td"),t=d.cloneNode(!0);t.setAttribute("title",this._context._options.localization.incrementHour),t.setAttribute("data-action",h.incrementHours),t.appendChild(c.cloneNode(!0)),e.appendChild(t),i.appendChild(e),e=document.createElement("td");const s=document.createElement("div");s.setAttribute("title",this._context._options.localization.pickHour),s.setAttribute("data-action",h.showHours),s.setAttribute("data-time-component",n.hours),e.appendChild(s),a.appendChild(e),e=document.createElement("td"),t=d.cloneNode(!0),t.setAttribute("title",this._context._options.localization.decrementHour),t.setAttribute("data-action",h.decrementHours),t.appendChild(r.cloneNode(!0)),e.appendChild(t),o.appendChild(e)}if(this._context._options.display.components.minutes){this._context._options.display.components.hours&&(i.appendChild(t.cloneNode(!0)),a.appendChild(s.cloneNode(!0)),o.appendChild(t.cloneNode(!0)));let e=document.createElement("td"),l=d.cloneNode(!0);l.setAttribute("title",this._context._options.localization.incrementMinute),l.setAttribute("data-action",h.incrementMinutes),l.appendChild(c.cloneNode(!0)),e.appendChild(l),i.appendChild(e),e=document.createElement("td");const p=document.createElement("div");p.setAttribute("title",this._context._options.localization.pickMinute),p.setAttribute("data-action",h.showMinutes),p.setAttribute("data-time-component",n.minutes),e.appendChild(p),a.appendChild(e),e=document.createElement("td"),l=d.cloneNode(!0),l.setAttribute("title",this._context._options.localization.decrementMinute),l.setAttribute("data-action",h.decrementMinutes),l.appendChild(r.cloneNode(!0)),e.appendChild(l),o.appendChild(e)}if(this._context._options.display.components.seconds){this._context._options.display.components.minutes&&(i.appendChild(t.cloneNode(!0)),a.appendChild(s.cloneNode(!0)),o.appendChild(t.cloneNode(!0)));let e=document.createElement("td"),l=d.cloneNode(!0);l.setAttribute("title",this._context._options.localization.incrementSecond),l.setAttribute("data-action",h.incrementSeconds),l.appendChild(c.cloneNode(!0)),e.appendChild(l),i.appendChild(e),e=document.createElement("td");const p=document.createElement("div");p.setAttribute("title",this._context._options.localization.pickSecond),p.setAttribute("data-action",h.showSeconds),p.setAttribute("data-time-component",n.seconds),e.appendChild(p),a.appendChild(e),e=document.createElement("td"),l=d.cloneNode(!0),l.setAttribute("title",this._context._options.localization.decrementSecond),l.setAttribute("data-action",h.decrementSeconds),l.appendChild(r.cloneNode(!0)),e.appendChild(l),o.appendChild(e)}if(!this._context._options.display.components.useTwentyfourHour){i.appendChild(t.cloneNode(!0));let e=document.createElement("td"),s=document.createElement("button");s.setAttribute("title",this._context._options.localization.togglePeriod),s.setAttribute("data-action",h.togglePeriod),s.setAttribute("tabindex","-1"),s.classList.add("btn","btn-primary"),e.appendChild(s),a.appendChild(e),o.appendChild(t.cloneNode(!0))}return e.push(i,a,o),e}}class HourDisplay{constructor(e){this._context=e}get _picker(){const e=document.createElement("div");e.classList.add(Namespace.Css.hourContainer);const t=document.createElement("table"),s=document.createElement("tbody");let i=document.createElement("tr");for(let e=0;e<=(this._context._options.display.components.useTwentyfourHour?24:12);e++){0!==e&&e%4==0&&(s.appendChild(i),i=document.createElement("tr"));const t=document.createElement("td"),a=document.createElement("div");a.setAttribute("data-action",h.selectHour),t.appendChild(a),i.appendChild(t)}return t.appendChild(s),e.appendChild(t),e}_update(){const e=this._context._display.widget.getElementsByClassName(Namespace.Css.hourContainer)[0];let t=this._context._viewDate.clone.startOf(n.date);e.querySelectorAll("tbody td div").forEach(((e,s)=>{let i=[];i.push(Namespace.Css.hour),this._context._validation.isValid(t,n.hours)||i.push(Namespace.Css.disabled),e.classList.remove(...e.classList),e.classList.add(...i),e.setAttribute("data-value",`${t.hours}`),e.innerText=this._context._options.display.components.useTwentyfourHour?t.hoursFormatted:t.twelveHoursFormatted,t.manipulate(1,n.hours)}))}}class MinuteDisplay{constructor(e){this._context=e}get _picker(){const e=document.createElement("div");e.classList.add(Namespace.Css.minuteContainer);const t=document.createElement("table"),s=document.createElement("tbody");let i=document.createElement("tr"),a=1===this._context._options.stepping?5:this._context._options.stepping;for(let e=0;e<=60/a;e++){0!==e&&e%4==0&&(s.appendChild(i),i=document.createElement("tr"));const t=document.createElement("td"),a=document.createElement("div");a.setAttribute("data-action",h.selectMinute),t.appendChild(a),i.appendChild(t)}return t.appendChild(s),e.appendChild(t),e}_update(){const e=this._context._display.widget.getElementsByClassName(Namespace.Css.minuteContainer)[0];let t=this._context._viewDate.clone.startOf(n.hours),s=1===this._context._options.stepping?5:this._context._options.stepping;e.querySelectorAll("tbody td div").forEach(((e,i)=>{let a=[];a.push(Namespace.Css.minute),this._context._validation.isValid(t,n.minutes)||a.push(Namespace.Css.disabled),e.classList.remove(...e.classList),e.classList.add(...a),e.setAttribute("data-value",`${t.minutes}`),e.innerText=t.minutesFormatted,t.manipulate(s,n.minutes)}))}}class secondDisplay{constructor(e){this._context=e}get _picker(){const e=document.createElement("div");e.classList.add(Namespace.Css.secondContainer);const t=document.createElement("table"),s=document.createElement("tbody");let i=document.createElement("tr");for(let e=0;e<=12;e++){0!==e&&e%4==0&&(s.appendChild(i),i=document.createElement("tr"));const t=document.createElement("td"),a=document.createElement("div");a.setAttribute("data-action",h.selectSecond),t.appendChild(a),i.appendChild(t)}return t.appendChild(s),e.appendChild(t),e}_update(){const e=this._context._display.widget.getElementsByClassName(Namespace.Css.secondContainer)[0];let t=this._context._viewDate.clone.startOf(n.minutes);e.querySelectorAll("tbody td div").forEach(((e,s)=>{let i=[];i.push(Namespace.Css.second),this._context._validation.isValid(t,n.seconds)||i.push(Namespace.Css.disabled),e.classList.remove(...e.classList),e.classList.add(...i),e.setAttribute("data-value",`${t.seconds}`),e.innerText=t.secondsFormatted,t.manipulate(5,n.seconds)}))}}class Display{constructor(e){this._isVisible=!1,this._documentClickEvent=e=>{var t;!this._isVisible||e.composedPath().includes(this.widget)||(null===(t=e.composedPath())||void 0===t?void 0:t.includes(this._context._element))||this._context._options.keepOpen&&this._context._options.debug||this.hide()},this._actionsClickEvent=e=>{this._context._action.do(e)},this._context=e,this._dateDisplay=new DateDisplay(e),this._monthDisplay=new MonthDisplay(e),this._yearDisplay=new YearDisplay(e),this._decadeDisplay=new DecadeDisplay(e),this._timeDisplay=new TimeDisplay(e),this._hourDisplay=new HourDisplay(e),this._minuteDisplay=new MinuteDisplay(e),this._secondDisplay=new secondDisplay(e),this._widget=void 0}get popper(){return this._popperInstance}get widget(){return this._widget}get isVisible(){return this._isVisible}_update(e){if(this.widget)switch(e){case n.seconds:this._secondDisplay._update();break;case n.minutes:this._minuteDisplay._update();break;case n.hours:this._hourDisplay._update();break;case n.date:this._dateDisplay._update();break;case n.month:this._monthDisplay._update();break;case n.year:this._yearDisplay._update();break;case"clock":this._timeDisplay._update(),this._update(n.hours),this._update(n.minutes),this._update(n.seconds);break;case"calendar":this._update(n.date),this._update(n.year),this._update(n.month),this._decadeDisplay._update();break;case"all":this._hasTime&&this._update("clock"),this._hasDate&&this._update("calendar")}}show(){if(null==this.widget){if(this._context._options.useCurrent){const e=(new DateTime).setLocale(this._context._options.localization.locale);if(this._context._options.keepInvalid)for(;!this._context._validation.isValid(e);)e.manipulate(1,n.date);this._context.dates._setValue(e)}this._buildWidget(),this._hasDate&&this._showMode(),this._context._options.display.inline?this._context._element.appendChild(this.widget):(document.body.appendChild(this.widget),this._popperInstance=s.createPopper(this._context.toggleElement||this._context._element,this.widget,{modifiers:[{name:"offset",options:{offset:[0,8]}},{name:"eventListeners",enabled:!0}],placement:"auto"})),"clock"==this._context._options.display.viewMode&&this._context._action.do({currentTarget:this.widget.querySelector(`.${Namespace.Css.timeContainer}`)},h.showClock),this.widget.querySelectorAll("[data-action]").forEach((e=>e.addEventListener("click",this._actionsClickEvent))),this._context._options.display.sideBySide&&(this._timeDisplay._update(),this.widget.getElementsByClassName(Namespace.Css.clockContainer)[0].style.display="block")}this.widget.classList.add(Namespace.Css.show),this._context._options.display.inline||(this._popperInstance.update(),document.addEventListener("click",this._documentClickEvent)),this._context._triggerEvent({type:Namespace.Events.show}),this._isVisible=!0}_showMode(e){if(!this.widget)return;if(e){const t=Math.max(this._context._minViewModeNumber,Math.min(3,this._context._currentViewMode+e));if(this._context._currentViewMode==t)return;this._context._currentViewMode=t}this.widget.querySelectorAll(`.${Namespace.Css.dateContainer} > div, .${Namespace.Css.timeContainer} > div`).forEach((e=>e.style.display="none"));const t=l[this._context._currentViewMode];let s=this.widget.querySelector(`.${t.className}`);switch(t.className){case Namespace.Css.decadesContainer:this._decadeDisplay._update();break;case Namespace.Css.yearsContainer:this._yearDisplay._update();break;case Namespace.Css.monthsContainer:this._monthDisplay._update();break;case Namespace.Css.daysContainer:this._dateDisplay._update()}s.style.display="block"}hide(){this.widget.classList.remove(Namespace.Css.show),this._isVisible&&(this._context._triggerEvent({type:Namespace.Events.hide,date:this._context._unset?null:this._context.dates.lastPicked?this._context.dates.lastPicked.clone:void 0}),this._isVisible=!1),document.removeEventListener("click",this._documentClickEvent)}toggle(){return this._isVisible?this.hide():this.show()}_dispose(){document.removeEventListener("click",this._documentClickEvent),this.widget&&(this.widget.querySelectorAll("[data-action]").forEach((e=>e.removeEventListener("click",this._actionsClickEvent))),this.widget.parentNode.removeChild(this.widget),this._widget=void 0)}_buildWidget(){const e=document.createElement("div");e.classList.add(Namespace.Css.widget);const t=document.createElement("div");t.classList.add(Namespace.Css.dateContainer),t.appendChild(this._decadeDisplay._picker),t.appendChild(this._yearDisplay._picker),t.appendChild(this._monthDisplay._picker),t.appendChild(this._dateDisplay._picker);const s=document.createElement("div");s.classList.add(Namespace.Css.timeContainer),s.appendChild(this._timeDisplay._picker),s.appendChild(this._hourDisplay._picker),s.appendChild(this._minuteDisplay._picker),s.appendChild(this._secondDisplay._picker);const i=document.createElement("div");if(i.classList.add(Namespace.Css.switch),i.appendChild(this._toolbar),this._context._options.display.inline&&e.classList.add(Namespace.Css.inline),this._context._options.display.sideBySide&&this._hasDate&&this._hasTime){e.classList.add(Namespace.Css.sideBySide),"top"===this._context._options.display.toolbarPlacement&&e.appendChild(i);const a=document.createElement("div");return a.classList.add("td-row"),t.classList.add("td-half"),s.classList.add("td-half"),a.appendChild(t),a.appendChild(s),e.appendChild(a),"bottom"!==this._context._options.display.toolbarPlacement&&"default"!==this._context._options.display.toolbarPlacement||e.appendChild(i),void(this._widget=e)}"top"===this._context._options.display.toolbarPlacement&&e.appendChild(i),this._hasDate&&(this._hasTime&&(t.classList.add(Namespace.Css.collapse),"clock"!==this._context._options.display.viewMode&&t.classList.add(Namespace.Css.show)),e.appendChild(t)),"default"===this._context._options.display.toolbarPlacement&&e.appendChild(i),this._hasTime&&(this._hasDate&&(s.classList.add(Namespace.Css.collapse),"clock"===this._context._options.display.viewMode&&s.classList.add(Namespace.Css.show)),e.appendChild(s)),"bottom"===this._context._options.display.toolbarPlacement&&e.appendChild(i);const a=document.createElement("div");a.classList.add("arrow"),a.setAttribute("data-popper-arrow",""),e.appendChild(a),this._widget=e}get _hasTime(){return this._context._options.display.components.clock&&(this._context._options.display.components.hours||this._context._options.display.components.minutes||this._context._options.display.components.seconds)}get _hasDate(){return this._context._options.display.components.calendar&&(this._context._options.display.components.year||this._context._options.display.components.month||this._context._options.display.components.date)}get _toolbar(){const e=document.createElement("tbody");if(this._context._options.display.buttons.today){const t=document.createElement("td"),s=document.createElement("div");s.setAttribute("data-action",h.today),s.setAttribute("title",this._context._options.localization.today),s.appendChild(this._iconTag(this._context._options.display.icons.today)),t.appendChild(s),e.appendChild(t)}if(!this._context._options.display.sideBySide&&this._hasDate&&this._hasTime){let t,s;"clock"===this._context._options.display.viewMode?(t=this._context._options.localization.selectDate,s=this._context._options.display.icons.date):(t=this._context._options.localization.selectTime,s=this._context._options.display.icons.time);const i=document.createElement("td"),a=document.createElement("div");a.setAttribute("data-action",h.togglePicker),a.setAttribute("title",t),a.appendChild(this._iconTag(s)),i.appendChild(a),e.appendChild(i)}if(this._context._options.display.buttons.clear){const t=document.createElement("td"),s=document.createElement("div");s.setAttribute("data-action",h.clear),s.setAttribute("title",this._context._options.localization.clear),s.appendChild(this._iconTag(this._context._options.display.icons.clear)),t.appendChild(s),e.appendChild(t)}if(this._context._options.display.buttons.close){const t=document.createElement("td"),s=document.createElement("div");s.setAttribute("data-action",h.close),s.setAttribute("title",this._context._options.localization.close),s.appendChild(this._iconTag(this._context._options.display.icons.close)),t.appendChild(s),e.appendChild(t)}const t=document.createElement("table");return t.appendChild(e),t}get _headTemplate(){let e=document.createElement("div");const t=document.createElement("thead"),s=document.createElement("tr"),i=document.createElement("th");i.classList.add(Namespace.Css.previous),i.setAttribute("data-action",h.previous),e.appendChild(this._iconTag(this._context._options.display.icons.previous)),i.appendChild(e),s.appendChild(i);const a=document.createElement("th");a.classList.add(Namespace.Css.switch),a.setAttribute("data-action",h.pickerSwitch),a.setAttribute("colspan",this._context._options.display.calendarWeeks?"6":"5"),s.appendChild(a);const n=document.createElement("th");return n.classList.add(Namespace.Css.next),n.setAttribute("data-action",h.next),e=document.createElement("div"),e.appendChild(this._iconTag(this._context._options.display.icons.next)),n.appendChild(e),s.appendChild(n),t.appendChild(s),t.cloneNode(!0)}_iconTag(e){if("sprites"===this._context._options.display.icons.type){const t=document.createElement("svg");return t.innerHTML=`<use xlink:href='${e}'></use>`,t}const t=document.createElement("i");return DOMTokenList.prototype.add.apply(t.classList,e.split(" ")),t}_rebuild(){const e=this._isVisible;e&&this.hide(),this._dispose(),e&&this.show()}}class Validation{constructor(e){this._context=e}isValid(e,t){var s;if(this._context._options.restrictions.disabledDates.length>0&&this._isInDisabledDates(e))return!1;if(this._context._options.restrictions.enabledDates.length>0&&!this._isInEnabledDates(e))return!1;if((null===(s=this._context._options.restrictions.daysOfWeekDisabled)||void 0===s?void 0:s.length)>0&&-1!==this._context._options.restrictions.daysOfWeekDisabled.indexOf(e.weekDay))return!1;if(this._context._options.restrictions.minDate&&e.isBefore(this._context._options.restrictions.minDate,t))return!1;if(this._context._options.restrictions.maxDate&&e.isAfter(this._context._options.restrictions.maxDate,t))return!1;if(t===n.hours||t===n.minutes||t===n.seconds){if(this._context._options.restrictions.disabledHours.length>0&&this._isInDisabledHours(e))return!1;if(this._context._options.restrictions.enabledHours.length>0&&!this._isInEnabledHours(e))return!1;if(this._context._options.restrictions.disabledTimeIntervals.length>0)for(let t=0;t<this._context._options.restrictions.disabledTimeIntervals.length;t++)if(e.isBetween(this._context._options.restrictions.disabledTimeIntervals[t].from,this._context._options.restrictions.disabledTimeIntervals[t].to))return!1}return!0}_isInDisabledDates(e){if(!this._context._options.restrictions.disabledDates||0===this._context._options.restrictions.disabledDates.length)return!1;const t=e.format(Dates.getFormatByUnit(n.date));return this._context._options.restrictions.disabledDates.map((e=>e.format(Dates.getFormatByUnit(n.date)))).find((e=>e===t))}_isInEnabledDates(e){if(!this._context._options.restrictions.enabledDates||0===this._context._options.restrictions.enabledDates.length)return!0;const t=e.format(Dates.getFormatByUnit(n.date));return this._context._options.restrictions.enabledDates.map((e=>e.format(Dates.getFormatByUnit(n.date)))).find((e=>e===t))}_isInDisabledHours(e){if(!this._context._options.restrictions.disabledHours||0===this._context._options.restrictions.disabledHours.length)return!1;const t=e.hours;return this._context._options.restrictions.disabledHours.find((e=>e===t))}_isInEnabledHours(e){if(!this._context._options.restrictions.enabledHours||0===this._context._options.restrictions.enabledHours.length)return!0;const t=e.hours;return this._context._options.restrictions.enabledHours.find((e=>e===t))}}class OptionConverter{static _mergeOptions(e,t){const s={};let i="";const a=(e,t,s,a)=>{switch(e){case"viewDate":{const e=this._dateConversion(t,"viewDate");if(void 0!==e)return e;Namespace.ErrorMessages.typeMismatch("viewDate",s,"DateTime or Date")}case"minDate":{if(void 0===t)return t;const e=this._dateConversion(t,"restrictions.minDate");if(void 0!==e)return e;Namespace.ErrorMessages.typeMismatch("restrictions.minDate",s,"DateTime or Date")}case"maxDate":{if(void 0===t)return t;const e=this._dateConversion(t,"restrictions.maxDate");if(void 0!==e)return e;Namespace.ErrorMessages.typeMismatch("restrictions.maxDate",s,"DateTime or Date")}case"disabledHours":return void 0===t?[]:(this._typeCheckNumberArray("restrictions.disabledHours",t,s),t.filter((e=>e<0||e>24)).length>0&&Namespace.ErrorMessages.numbersOutOfRage("restrictions.disabledHours",0,23),t);case"enabledHours":return void 0===t?[]:(this._typeCheckNumberArray("restrictions.enabledHours",t,s),t.filter((e=>e<0||e>24)).length>0&&Namespace.ErrorMessages.numbersOutOfRage("restrictions.enabledHours",0,23),t);case"daysOfWeekDisabled":return void 0===t?[]:(this._typeCheckNumberArray("restrictions.daysOfWeekDisabled",t,s),t.filter((e=>e<0||e>6)).length>0&&Namespace.ErrorMessages.numbersOutOfRage("restrictions.daysOfWeekDisabled",0,6),t);case"enabledDates":return void 0===t?[]:(this._typeCheckDateArray("restrictions.enabledDates",t,s),t);case"disabledDates":return void 0===t?[]:(this._typeCheckDateArray("restrictions.disabledDates",t,s),t);case"disabledTimeIntervals":if(void 0===t)return[];Array.isArray(t)||Namespace.ErrorMessages.typeMismatch(e,s,"array of { from: DateTime|Date, to: DateTime|Date }");const n=t;for(let t=0;t<n.length;t++)Object.keys(n[t]).forEach((s=>{const i=`${e}[${t}].${s}`;let a=n[t][s];const o=this._dateConversion(a,i);o||Namespace.ErrorMessages.typeMismatch(i,typeof a,"DateTime or Date"),n[t][s]=o}));return n;case"toolbarPlacement":case"type":case"viewMode":case"dayViewHeaderFormat":const o={toolbarPlacement:["top","bottom","default"],type:["icons","sprites"],viewMode:["clock","calendar","months","years","decades"],dayViewHeaderFormat:["numeric","2-digit","long","short","narrow"]}[e];return o.includes(t)||Namespace.ErrorMessages.unexpectedOptionValue(i.substring(1),t,o),t;case"inputFormat":return t;default:switch(a){case"boolean":return"true"===t||!0===t;case"number":return+t;case"string":return t.toString();case"object":return{};case"function":return t;default:Namespace.ErrorMessages.typeMismatch(i.substring(1),s,a)}}},n=(e,t,s)=>{const o=Object.keys(e).filter((e=>!Object.keys(t).includes(e)));if(o.length>0){const e=OptionConverter._flattenDefaultOptions(),t=o.map((t=>{let s=`"${i.substring(1)}.${t}" in not a known option.`,a=e.find((e=>e.includes(t)));return a&&(s+=`Did you mean "${a}"?`),s}));Namespace.ErrorMessages.unexpectedOptions(t)}Object.keys(t).forEach((o=>{const c=t[o];let r=typeof e[o],d=typeof c,l=e[o];if(!e.hasOwnProperty(o)){if("undefined"===d||0===(null==l?void 0:l.length)&&Array.isArray(c))return void(s[o]=c);e[o]=c,l=e[o]}i+=`.${o}`,s[o]=a(o,l,r,d),"object"==typeof c&&"inputFormat"!==o?(Array.isArray(e[o])||(n(e[o],c,s[o]),i=i.substring(0,i.lastIndexOf(`.${o}`))),i=i.substring(0,i.lastIndexOf(`.${o}`))):i=i.substring(0,i.lastIndexOf(`.${o}`))}))};return n(e,t,s),s}static _dataToOptions(e,t){const s=e.dataset;if(!s||0===Object.keys(s).length||s.constructor!==DOMStringMap)return t;let i={};const a=e=>{const t={};return Object.keys(e).forEach((e=>{t[e.toLowerCase()]=e})),t},n=(e,t,s,i)=>{const o=a(s)[e[t].toLowerCase()],c={};return void 0===o||(s[o].constructor===Object?(t++,c[o]=n(e,t,s[o],i)):c[o]=i),c},o=a(t);return Object.keys(s).filter((e=>e.startsWith(Namespace.dataKey))).map((e=>e.substring(2))).forEach((e=>{let a=o[e.toLowerCase()];if(e.includes("_")){const c=e.split("_");a=o[c[0].toLowerCase()],void 0!==a&&t[a].constructor===Object&&(i[a]=n(c,1,t[a],s[`td${e}`]))}else void 0!==a&&(i[a]=s[`td${e}`])})),this._mergeOptions(i,t)}static _dateTypeCheck(e){if("DateTime"===e.constructor.name)return e;if("Date"===e.constructor.name)return DateTime.convert(e);if("string"==typeof e){const t=new DateTime(e);return"null"===JSON.stringify(t)?null:t}return null}static _typeCheckDateArray(e,t,s){Array.isArray(t)||Namespace.ErrorMessages.typeMismatch(e,s,"array of DateTime or Date");for(let s=0;s<t.length;s++){let i=t[s];const a=this._dateConversion(i,e);a||Namespace.ErrorMessages.typeMismatch(e,typeof i,"DateTime or Date"),t[s]=a}}static _typeCheckNumberArray(e,t,s){(!Array.isArray(t)||t.length&&t.find((e=>"number"!=typeof e)))&&Namespace.ErrorMessages.typeMismatch(e,s,"array of numbers")}static _dateConversion(e,t){"string"==typeof e&&Namespace.ErrorMessages.dateString();const s=this._dateTypeCheck(e);return s||Namespace.ErrorMessages.failedToParseDate(t,e),s}static _flattenDefaultOptions(){const e=(t,s=[])=>Array.isArray(t)?[]:Object(t)===t?Object.entries(t).flatMap((([t,i])=>e(i,[...s,t]))):s.join(".");return e(d)}static _validateConflcits(e){e.restrictions.minDate&&e.restrictions.maxDate&&(e.restrictions.minDate.isAfter(e.restrictions.maxDate)&&Namespace.ErrorMessages.conflictingConfiguration("minDate is after maxDate"),e.restrictions.maxDate.isBefore(e.restrictions.minDate)&&Namespace.ErrorMessages.conflictingConfiguration("maxDate is before minDate"))}}const p={__proto__:null,TempusDominus:class TempusDominus{constructor(e,t={}){this._currentViewMode=0,this._subscribers={},this._minViewModeNumber=0,this._isDisabled=!1,this._notifyChangeEventContext=0,this._viewDate=new DateTime,this._inputChangeEvent=()=>{let e;if("string"==typeof this._options.display.inputFormat){let t=new Intl.NumberFormat(this._options.localization.locale).resolvedOptions().numberingSystem;e=new DateTime(c.DateTime.fromFormat(this._input.value,this._options.display.inputFormat,{locale:this._options.localization.locale,numberingSystem:t}).toJSDate())}(null==e?void 0:e.isValid)?(e.setLocale(this._options.localization.locale),this.dates._setValue(e)):this._triggerEvent({type:Namespace.Events.error,reason:Namespace.ErrorMessages.failedToParseInput,date:e})},this._toggleClickEvent=()=>{this.toggle()},e||Namespace.ErrorMessages.mustProvideElement,this._element=e,this._options=this._initializeOptions(t,d,!0),this._viewDate.setLocale(this._options.localization.locale),this._unset=!0,this._display=new Display(this),this._validation=new Validation(this),this.dates=new Dates(this),this._action=new Actions(this),this._initializeInput(),this._initializeToggle(),this._options.display.inline&&this._display.show()}get viewDate(){return this._viewDate}get toggleElement(){return this._toggle}updateOptions(e,t=!1){this._options=t?this._initializeOptions(e,d):this._initializeOptions(e,this._options),this._display._rebuild()}toggle(){this._isDisabled||this._display.toggle()}show(){this._isDisabled||this._display.show()}hide(){this._display.hide()}disable(){var e;this._isDisabled=!0,null===(e=this._input)||void 0===e||e.setAttribute("disabled","disabled"),this._display.hide()}enable(){var e;this._isDisabled=!1,null===(e=this._input)||void 0===e||e.removeAttribute("disabled")}clear(){this.dates.clear()}subscribe(e,t){"string"==typeof e&&(e=[e]);let s=[];s=Array.isArray(t)?t:[t],e.length!==s.length&&Namespace.ErrorMessages.subscribeMismatch;const i=[];for(let t=0;t<e.length;t++){const a=e[t];if(Array.isArray(this._subscribers[a])||(this._subscribers[a]=[]),this._subscribers[a].push(s[t]),i.push({unsubscribe:this._unsubscribe.bind(this,a,this._subscribers[a].length-1)}),1===e.length)return i[0]}return i}dispose(){var e,t;this._display.hide(),this._display._dispose(),null===(e=this._input)||void 0===e||e.removeEventListener("change",this._inputChangeEvent),this._options.allowInputToggle&&(null===(t=this._input)||void 0===t||t.removeEventListener("click",this._toggleClickEvent)),this._toggle.removeEventListener("click",this._toggleClickEvent),this._subscribers={}}_triggerEvent(e){if(e&&e.hasOwnProperty("date")){const{date:t,oldDate:s,isClear:i}=e;if(this._notifyChangeEventContext++,t&&s&&t.isSame(s)||!i&&!t&&!s||this._notifyChangeEventContext>1)return void(this._notifyChangeEventContext=0);this._handlePromptTimeIfNeeded(e),null===o.default||void 0===o.default||o.default(this._element).trigger(o.default.Event(e.type,{date:t}))}if(this._element.dispatchEvent(new CustomEvent(e.type,{detail:e})),window.jQuery){(0,window.jQuery)(this._element).trigger(e)}(()=>{Array.isArray(this._subscribers[e.type])&&this._subscribers[e.type].forEach((t=>{t(e)}))})(),this._notifyChangeEventContext=0}_viewUpdate(e){this._triggerEvent({type:Namespace.Events.update,change:e,viewDate:this._viewDate.clone})}_unsubscribe(e,t){this._subscribers[e].splice(t,1)}_initializeOptions(e,t,s=!1){var i;if(e=OptionConverter._mergeOptions(e,t),s&&(e=OptionConverter._dataToOptions(this._element,e)),OptionConverter._validateConflcits(e),e.viewDate=e.viewDate.setLocale(e.localization.locale),this._viewDate.isSame(e.viewDate)||(this._viewDate=e.viewDate),e.display.inputFormat){let t=e.display.inputFormat,s=e.display.components;s.year=/y/.test(t),s.month=/M/.test(t),s.date=/d/.test(t),s.hours=/h/i.test(t),s.useTwentyfourHour=/H/.test(t),s.minutes=/m/.test(t),s.seconds=/s/.test(t)}return e.display.components.year&&(this._minViewModeNumber=2),e.display.components.month&&(this._minViewModeNumber=1),e.display.components.date&&(this._minViewModeNumber=0),this._currentViewMode=Math.max(this._minViewModeNumber,this._currentViewMode),l[this._currentViewMode].name!==e.display.viewMode&&(this._currentViewMode=Math.max(l.findIndex((t=>t.name===e.display.viewMode)),this._minViewModeNumber)),(null===(i=this._display)||void 0===i?void 0:i.isVisible)&&this._display._update("all"),e}_initializeInput(){var e,t,s;if("INPUT"==this._element.tagName)this._input=this._element;else{let e=this._element.dataset.tdTargetInput;this._input=null==e||"nearest"==e?this._element.querySelector("input"):this._element.querySelector(e)}null===(e=this._input)||void 0===e||e.addEventListener("change",this._inputChangeEvent),(null===(t=this._input)||void 0===t?void 0:t.value)&&this._input.dispatchEvent(new Event("change")),this._options.allowInputToggle&&(null===(s=this._input)||void 0===s||s.addEventListener("click",this._toggleClickEvent))}_initializeToggle(){if(this._options.display.inline)return;let e=this._element.dataset.tdTargetToggle;"nearest"==e&&(e=`[data-td-toggle="${Namespace.dataKey}"]`),this._toggle=null==e?this._element:this._element.querySelector(e),this._toggle.addEventListener("click",this._toggleClickEvent)}_handlePromptTimeIfNeeded(e){var t,s;!this._options.promptTimeOnDateChange||this._options.display.inline||this._options.display.sideBySide||!this._display._hasTime||(null===(t=this._display.widget)||void 0===t?void 0:t.getElementsByClassName(Namespace.Css.show)[0].classList.contains(Namespace.Css.timeContainer))||!e.oldDate&&this._options.useCurrent||e.oldDate&&(null===(s=e.date)||void 0===s?void 0:s.isSame(e.oldDate))||(clearTimeout(this._currentPromptTimeTimeout),this._currentPromptTimeTimeout=setTimeout((()=>{this._display.widget&&this._action.do({currentTarget:this._display.widget.querySelector(`.${Namespace.Css.switch} div`)},h.togglePicker)}),this._options.promptTimeOnDateChangeTransitionDelay))}},Namespace:Namespace,DefaultOptions:d,DateTime:DateTime,jQueryInterface:function(e,t){return 1===this.length?p.jQueryHandleThis(this,e,t):this.each((function(){p.jQueryHandleThis(this,e,t)}))},jQueryHandleThis:function(e,t,s){let i=o.default(e).data(p.Namespace.dataKey);if("object"==typeof t&&(t=o.default.extend({},p.DefaultOptions,t)),i||(i=new p.TempusDominus(o.default(e)[0],t),o.default(e).data(p.Namespace.dataKey,i)),"string"==typeof t){if(void 0===i[t])throw new Error(`No method named "${t}"`);if(void 0===s)return i[t]();{"date"===t&&(i.isDateUpdateThroughDateOptionFromClientCode=!0);const e=i[t](s);return i.isDateUpdateThroughDateOptionFromClientCode=!1,e}}},getSelectorFromElement:function(e){let t,s=e.data("target");return s||(s=e.attr("href")||"",s=/^#[a-z]/i.test(s)?s:null),t=o.default(s),0===t.length?e:(t.data(p.Namespace.dataKey)||o.default.extend({},t.data(),o.default(this).data()),t)}},u="tempusDominus";return o.default.fn[u]=p.jQueryInterface,o.default.fn[u].Constructor=p.TempusDominus,o.default.fn[u].noConflict=function(){return o.default.fn[u]=o.default.fn[u],p.jQueryInterface},p}(jQuery,luxon,Popper);
//# sourceMappingURL=tempus-dominus.min.js.map